- name: If no in Virginia, no deduction.
  period: 2022
  input:
    state_code: WA
    AFAGI: 60_000
    birthday: 01/01/1929
  output:
    va_age_deduction: 0
    
- name: If in Virginia, single filer, and the taxpayer was born before 01/01/1939.
  period: 2022
  input:
    state_code: VA
    AFAGI: 50_000 # always the joint AFAGI
    filing_status: SINGLE
  output:
    va_age_deduction: 12_000

  - name: If in Virginia, single taxpayer, and the taxpayer was born between 01/02/1939 and 01/01/1958.
  period: 2022
  input:
    state_code: VA
    AFAGI: 60_000
    filing_status: SINGLE
  output:
    #deduction_ammount = $12,000 - (AFAGI - $50,000)
    va_age_deduction: 2_000

  - name: If in Virginia, single taxpayer, and the taxpayer was born after 01/01/1958.
  period: 2022
  input:
    state_code: VA
    AFAGI: 60_000
    filing_status: SINGLE
  output:
    # not eligible
    va_age_deduction: 0

- name: If in Virginia, filed jointly, and both taxpayers were born before 01/01/1939.
  period: 2022
  input:
    state_code: VA
    AFAGI: 100_000
    filing_status: JOINT
  output:
    #deduction_amount = 2 * $12,000 = $24,000
    va_age_deduction: 24_000
    
- name: If in Virginia, married but filed seperately, and both taxpayers was born between 01/02/1939 and 01/01/1958.
  period: 2022
  input:
    state_code: VA
    AFAGI: 80_000
    filing_status: SEPERATE # both claim
  output:
   # deduction_amount = ($24,000 - (AFAGI - $75,000))/2
    va_age_deduction: 19_000

  - name: If in Virginia, married but filed seperately, and the taxpayer was born between 01/02/1939 and 01/01/1958.
  period: 2022
  input:
    state_code: VA
    AFAGI: 90_000
    filing_status: SEPERATE # but only one claim
  output:
   # deduction_amount = $24,000 - (AFAGI - $75,000)
    va_age_deduction: 0

- name: If in Virginia, married and filed jointly, and both taxpayers were born between 01/02/1939 and 01/01/1958.
  period: 2022
  input:
    state_code: VA
    AFAGI: 90_000
    filing_status: JOINT # both claim
  output:
    # deduction_amount = $24,000 - (AFAGI - $75,000)
    va_age_deduction: 9_000

- name: If in Virginia, married and filed jointly, one taxpayer was born before 01/01/1939 and the other was born between 01/02/1939 and 01/01/1958
  period: 2022
  input:
    state_code: VA
    AFAGI: 90_000
    filing_status: JOINT # both claim
  output:
   # deduction_amount = $24,000 - (AFAGI - $75,000)
    va_age_deduction: 9_000



Possible cases:

# single : born after 01/02/1958
# single: born between 01/02/1939 and 01/01/1958
# single: born before 01/01/1939

# married: jointly, both born after 01/02/1958
# married: jointly, both between 01/02/1939 and 01/01/1958
# married: jointly, both born before 01/01/1939

# married: jointly: one eligible for deduction: born before 01/01/1939
# married: jointly: one eligible for deduction: born between 01/02/1939 and 01/01/1958
# married: jointly: both eligible for deduction: one born before 01/01/1939, the other born between 01/02/1939 and 01/01/1958

# married: separate, both born after 01/02/1958
# married: separate, both between 01/02/1939 and 01/01/1958
# married: separate, both born before 01/01/1939

# married: separate: one eligible for deduction: born before 01/01/1939
# married: separate: one eligible for deduction: born between 01/02/1939 and 01/01/1958
# married: separate: both eligible for deduction: one born before 01/01/1939, the other born between 01/02/1939 and 01/01/1958


Possible cases (copy):

# single : born after 01/02/1958
# single: born between 01/02/1939 and 01/01/1958
# single: born before 01/01/1939

# married: jointly, both born after 01/02/1958: $0
# married: jointly, both between 01/02/1939 and 01/01/1958: $24,000 - (AFAGI - $75,000)
# married: jointly, both born before 01/01/1939: $24,000

# married: jointly: one eligible for deduction: born before 01/01/1939: $12,000
# married: jointly: one eligible for deduction: born between 01/02/1939 and 01/01/1958: $12,000 - (AFAGI - $75,000)
# married: jointly: both eligible for deduction: one born before 01/01/1939, the other born between 01/02/1939 and 01/01/1958: $12,000 + $12,000 - (AFAGI - $75,000)

# married: separate, both born after 01/02/1958: $0
# married: separate, both between 01/02/1939 and 01/01/1958: ($24,000 - (AFAGI - $75,000)) / 2
# married: separate, both born before 01/01/1939: $12,000

# married: separate: one eligible for deduction: born before 01/01/1939: $12,000
# married: separate: one eligible for deduction: born between 01/02/1939 and 01/01/1958: $12,000 - (AFAGI - $75,000)
# married: separate: both eligible for deduction: one born before 01/01/1939, the other born between 01/02/1939 and 01/01/1958: [$12,000 + $12,000 - (AFAGI - $75,000)] / 2